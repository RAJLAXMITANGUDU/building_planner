"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_src_app_components_DrawingCanvas_jsx"],{

/***/ "(app-pages-browser)/./src/app/components/DrawingCanvas.jsx":
/*!**********************************************!*\
  !*** ./src/app/components/DrawingCanvas.jsx ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_DrawingContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/DrawingContext */ \"(app-pages-browser)/./src/app/context/DrawingContext.jsx\");\n\nvar _s = $RefreshSig$();\n\n\nconst DrawingCanvas = ()=>{\n    _s();\n    const { activeTool, shapes, addShape, selectedShape, setSelectedShape, showAnnotations, updateShape } = (0,_context_DrawingContext__WEBPACK_IMPORTED_MODULE_2__.useDrawingContext)();\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isDrawing, setIsDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [startPoint, setStartPoint] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: 0,\n        y: 0\n    });\n    const [dimensions, setDimensions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        width: 800,\n        height: 600\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DrawingCanvas.useEffect\": ()=>{\n            if (true) {\n                const updateDimensions = {\n                    \"DrawingCanvas.useEffect.updateDimensions\": ()=>{\n                        setDimensions({\n                            width: window.innerWidth - 300,\n                            height: window.innerHeight - 150\n                        });\n                    }\n                }[\"DrawingCanvas.useEffect.updateDimensions\"];\n                updateDimensions();\n                window.addEventListener('resize', updateDimensions);\n                return ({\n                    \"DrawingCanvas.useEffect\": ()=>window.removeEventListener('resize', updateDimensions)\n                })[\"DrawingCanvas.useEffect\"];\n            }\n        }\n    }[\"DrawingCanvas.useEffect\"], []);\n    // Draw shapes on canvas\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DrawingCanvas.useEffect\": ()=>{\n            const canvas = canvasRef.current;\n            if (!canvas) return;\n            const ctx = canvas.getContext('2d');\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            shapes.forEach({\n                \"DrawingCanvas.useEffect\": (shape)=>{\n                    ctx.strokeStyle = shape.id === (selectedShape === null || selectedShape === void 0 ? void 0 : selectedShape.id) ? 'blue' : 'black';\n                    ctx.lineWidth = 2;\n                    ctx.font = '12px Arial';\n                    ctx.fillStyle = 'black';\n                    switch(shape.type){\n                        case 'line':\n                            ctx.beginPath();\n                            ctx.moveTo(shape.properties.x1, shape.properties.y1);\n                            ctx.lineTo(shape.properties.x2, shape.properties.y2);\n                            ctx.stroke();\n                            if (showAnnotations) {\n                                const length = Math.sqrt(Math.pow(shape.properties.x2 - shape.properties.x1, 2) + Math.pow(shape.properties.y2 - shape.properties.y1, 2)).toFixed(1);\n                                ctx.fillText(\"\".concat(length, \"px\"), (shape.properties.x1 + shape.properties.x2) / 2, (shape.properties.y1 + shape.properties.y2) / 2);\n                            }\n                            break;\n                        case 'rectangle':\n                            ctx.strokeRect(shape.properties.x, shape.properties.y, shape.properties.width, shape.properties.height);\n                            if (showAnnotations) {\n                                ctx.fillText(\"W: \".concat(shape.properties.width, \"px\"), shape.properties.x + shape.properties.width / 2 - 20, shape.properties.y - 10);\n                                ctx.fillText(\"H: \".concat(shape.properties.height, \"px\"), shape.properties.x - 40, shape.properties.y + shape.properties.height / 2);\n                            }\n                            break;\n                        case 'circle':\n                            ctx.beginPath();\n                            ctx.arc(shape.properties.x, shape.properties.y, shape.properties.radius, 0, Math.PI * 2);\n                            ctx.stroke();\n                            if (showAnnotations) {\n                                ctx.fillText(\"R: \".concat(shape.properties.radius, \"px\"), shape.properties.x + shape.properties.radius + 5, shape.properties.y);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }[\"DrawingCanvas.useEffect\"]);\n        }\n    }[\"DrawingCanvas.useEffect\"], [\n        shapes,\n        selectedShape,\n        showAnnotations,\n        dimensions\n    ]);\n    // Define event handlers\n    const handleMouseDown = (e)=>{\n        if (activeTool === 'select') return;\n        const canvas = canvasRef.current;\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        setIsDrawing(true);\n        setStartPoint({\n            x,\n            y\n        });\n        const newShape = {\n            id: Date.now().toString(),\n            type: activeTool,\n            properties: {}\n        };\n        switch(activeTool){\n            case 'line':\n                newShape.properties = {\n                    x1: x,\n                    y1: y,\n                    x2: x,\n                    y2: y\n                };\n                break;\n            case 'rectangle':\n                newShape.properties = {\n                    x,\n                    y,\n                    width: 0,\n                    height: 0\n                };\n                break;\n            case 'circle':\n                newShape.properties = {\n                    x,\n                    y,\n                    radius: 0\n                };\n                break;\n            default:\n                break;\n        }\n        addShape(newShape);\n        setSelectedShape(newShape);\n    };\n    const handleMouseMove = (e)=>{\n        if (!isDrawing || !selectedShape) return;\n        const canvas = canvasRef.current;\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        const updatedShape = {\n            ...selectedShape\n        };\n        switch(selectedShape.type){\n            case 'line':\n                updatedShape.properties = {\n                    ...selectedShape.properties,\n                    x2: x,\n                    y2: y\n                };\n                break;\n            case 'rectangle':\n                updatedShape.properties = {\n                    ...selectedShape.properties,\n                    width: x - selectedShape.properties.x,\n                    height: y - selectedShape.properties.y\n                };\n                break;\n            case 'circle':\n                const radius = Math.sqrt(Math.pow(x - selectedShape.properties.x, 2) + Math.pow(y - selectedShape.properties.y, 2));\n                updatedShape.properties = {\n                    ...selectedShape.properties,\n                    radius\n                };\n                break;\n            default:\n                break;\n        }\n        updateShape(selectedShape.id, updatedShape.properties);\n    };\n    const handleMouseUp = ()=>{\n        setIsDrawing(false);\n    };\n    const handleCanvasClick = (e)=>{\n        if (activeTool !== 'select') return;\n        const canvas = canvasRef.current;\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        // Find clicked shape\n        const clickedShape = shapes.find((shape)=>{\n            switch(shape.type){\n                case 'line':\n                    // Line collision detection\n                    const dx = shape.properties.x2 - shape.properties.x1;\n                    const dy = shape.properties.y2 - shape.properties.y1;\n                    const length = Math.sqrt(dx * dx + dy * dy);\n                    const dot = ((x - shape.properties.x1) * dx + (y - shape.properties.y1) * dy) / (length * length);\n                    const closestX = shape.properties.x1 + dot * dx;\n                    const closestY = shape.properties.y1 + dot * dy;\n                    const distance = Math.sqrt(Math.pow(x - closestX, 2) + Math.pow(y - closestY, 2));\n                    return distance < 5;\n                case 'rectangle':\n                    return x >= shape.properties.x && x <= shape.properties.x + shape.properties.width && y >= shape.properties.y && y <= shape.properties.y + shape.properties.height;\n                case 'circle':\n                    const distanceFromCenter = Math.sqrt(Math.pow(x - shape.properties.x, 2) + Math.pow(y - shape.properties.y, 2));\n                    return distanceFromCenter <= shape.properties.radius;\n                default:\n                    return false;\n            }\n        });\n        setSelectedShape(clickedShape || null);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex-1 relative\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n            ref: canvasRef,\n            width: dimensions.width,\n            height: dimensions.height,\n            onMouseDown: handleMouseDown,\n            onMouseMove: handleMouseMove,\n            onMouseUp: handleMouseUp,\n            onMouseLeave: handleMouseUp,\n            onClick: handleCanvasClick,\n            className: \"border border-gray-300 bg-white\",\n            style: {\n                cursor: activeTool === 'select' ? 'default' : 'crosshair'\n            }\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\rajla\\\\OneDrive\\\\Desktop\\\\building_planner\\\\frontend\\\\src\\\\app\\\\components\\\\DrawingCanvas.jsx\",\n            lineNumber: 243,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\rajla\\\\OneDrive\\\\Desktop\\\\building_planner\\\\frontend\\\\src\\\\app\\\\components\\\\DrawingCanvas.jsx\",\n        lineNumber: 242,\n        columnNumber: 5\n    }, undefined);\n};\n_s(DrawingCanvas, \"+r6eMqGbcU/hHxfODCgEZtTH8LY=\", false, function() {\n    return [\n        _context_DrawingContext__WEBPACK_IMPORTED_MODULE_2__.useDrawingContext\n    ];\n});\n_c = DrawingCanvas;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DrawingCanvas);\nvar _c;\n$RefreshReg$(_c, \"DrawingCanvas\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvY29tcG9uZW50cy9EcmF3aW5nQ2FudmFzLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBSWU7QUFFK0M7QUFFOUQsTUFBTUssZ0JBQWdCOztJQUNwQixNQUFNLEVBQ0pDLFVBQVUsRUFDVkMsTUFBTSxFQUNOQyxRQUFRLEVBQ1JDLGFBQWEsRUFDYkMsZ0JBQWdCLEVBQ2hCQyxlQUFlLEVBQ2ZDLFdBQVcsRUFDWixHQUFHUiwwRUFBaUJBO0lBRXJCLE1BQU1TLFlBQVlYLDZDQUFNQSxDQUFDO0lBQ3pCLE1BQU0sQ0FBQ1ksV0FBV0MsYUFBYSxHQUFHWiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNhLFlBQVlDLGNBQWMsR0FBR2QsK0NBQVFBLENBQUM7UUFBRWUsR0FBRztRQUFHQyxHQUFHO0lBQUU7SUFDMUQsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUdsQiwrQ0FBUUEsQ0FBQztRQUFFbUIsT0FBTztRQUFLQyxRQUFRO0lBQUk7SUFHdkV0QixnREFBU0E7bUNBQUM7WUFDUixJQUFJLElBQTZCLEVBQUU7Z0JBQ2pDLE1BQU11QjtnRUFBbUI7d0JBQ3ZCSCxjQUFjOzRCQUNaQyxPQUFPRyxPQUFPQyxVQUFVLEdBQUc7NEJBQzNCSCxRQUFRRSxPQUFPRSxXQUFXLEdBQUc7d0JBQy9CO29CQUNGOztnQkFFQUg7Z0JBQ0FDLE9BQU9HLGdCQUFnQixDQUFDLFVBQVVKO2dCQUNsQzsrQ0FBTyxJQUFNQyxPQUFPSSxtQkFBbUIsQ0FBQyxVQUFVTDs7WUFDcEQ7UUFDRjtrQ0FBRyxFQUFFO0lBRUwsd0JBQXdCO0lBQ3hCdkIsZ0RBQVNBO21DQUFDO1lBQ1IsTUFBTTZCLFNBQVNqQixVQUFVa0IsT0FBTztZQUNoQyxJQUFJLENBQUNELFFBQVE7WUFFYixNQUFNRSxNQUFNRixPQUFPRyxVQUFVLENBQUM7WUFDOUJELElBQUlFLFNBQVMsQ0FBQyxHQUFHLEdBQUdKLE9BQU9SLEtBQUssRUFBRVEsT0FBT1AsTUFB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QUFLO29CQUNILE1BQU0rRCxxQkFBcUJqQyxLQUFLQyxJQUFJLENBQ2xDRCxLQUFLRSxHQUFHLENBQUNyQyxJQUFJa0IsTUFBTVMsVUFBVSxDQUFDM0IsQ0FBQyxFQUFFLEtBQ2pDbUMsS0FBS0UsR0FBRyxDQUFDcEMsSUFBSWlCLE1BQU1TLFVBQVUsQ0FBQzFCLENBQUMsRUFBRTtvQkFFbkMsT0FBT21FLHNCQUFzQmxELE1BQU1TLFVBQVUsQ0FBQ2UsTUFBTTtnQkFFdEQ7b0JBQ0UsT0FBTztZQUNYO1FBQ0Y7UUFFQWxELGlCQUFpQm9FLGdCQUFnQjtJQUNuQztJQUVBLHFCQUNFLDhEQUFDUztRQUFJQyxXQUFVO2tCQUNiLDRFQUFDMUQ7WUFDQzJELEtBQUs1RTtZQUNMUyxPQUFPRixXQUFXRSxLQUFLO1lBQ3ZCQyxRQUFRSCxXQUFXRyxNQUFNO1lBQ3pCbUUsYUFBYTVCO1lBQ2I2QixhQUFhakI7WUFDYmtCLFdBQVdoQjtZQUNYaUIsY0FBY2pCO1lBQ2RrQixTQUFTakI7WUFDVFcsV0FBVTtZQUNWTyxPQUFPO2dCQUFFQyxRQUFRMUYsZUFBZSxXQUFXLFlBQVk7WUFBWTs7Ozs7Ozs7Ozs7QUFJM0U7R0F4UE1EOztRQVNBRCxzRUFBaUJBOzs7S0FUakJDO0FBMFBOLGlFQUFlQSxhQUFhQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHJhamxhXFxPbmVEcml2ZVxcRGVza3RvcFxcYnVpbGRpbmdfcGxhbm5lclxcZnJvbnRlbmRcXHNyY1xcYXBwXFxjb21wb25lbnRzXFxEcmF3aW5nQ2FudmFzLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtcclxuICB1c2VFZmZlY3QsXHJcbiAgdXNlUmVmLFxyXG4gIHVzZVN0YXRlLFxyXG59IGZyb20gJ3JlYWN0JztcclxuXHJcbmltcG9ydCB7IHVzZURyYXdpbmdDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9EcmF3aW5nQ29udGV4dCc7XHJcblxyXG5jb25zdCBEcmF3aW5nQ2FudmFzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHtcclxuICAgIGFjdGl2ZVRvb2wsXHJcbiAgICBzaGFwZXMsXHJcbiAgICBhZGRTaGFwZSxcclxuICAgIHNlbGVjdGVkU2hhcGUsXHJcbiAgICBzZXRTZWxlY3RlZFNoYXBlLFxyXG4gICAgc2hvd0Fubm90YXRpb25zLFxyXG4gICAgdXBkYXRlU2hhcGVcclxuICB9ID0gdXNlRHJhd2luZ0NvbnRleHQoKTtcclxuICBcclxuICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgW2lzRHJhd2luZywgc2V0SXNEcmF3aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbc3RhcnRQb2ludCwgc2V0U3RhcnRQb2ludF0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7XHJcbiAgY29uc3QgW2RpbWVuc2lvbnMsIHNldERpbWVuc2lvbnNdID0gdXNlU3RhdGUoeyB3aWR0aDogODAwLCBoZWlnaHQ6IDYwMCB9KTtcclxuXHJcbiBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZURpbWVuc2lvbnMgPSAoKSA9PiB7XHJcbiAgICAgICAgc2V0RGltZW5zaW9ucyh7XHJcbiAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGggLSAzMDAsXHJcbiAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAtIDE1MFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgdXBkYXRlRGltZW5zaW9ucygpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlRGltZW5zaW9ucyk7XHJcbiAgICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlRGltZW5zaW9ucyk7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBEcmF3IHNoYXBlcyBvbiBjYW52YXNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XHJcbiAgICBpZiAoIWNhbnZhcykgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIFxyXG4gICAgc2hhcGVzLmZvckVhY2goc2hhcGUgPT4ge1xyXG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzaGFwZS5pZCA9PT0gc2VsZWN0ZWRTaGFwZT8uaWQgPyAnYmx1ZScgOiAnYmxhY2snO1xyXG4gICAgICBjdHgubGluZVdpZHRoID0gMjtcclxuICAgICAgY3R4LmZvbnQgPSAnMTJweCBBcmlhbCc7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAnYmxhY2snO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChzaGFwZS50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnbGluZSc6XHJcbiAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICBjdHgubW92ZVRvKHNoYXBlLnByb3BlcnRpZXMueDEsIHNoYXBlLnByb3BlcnRpZXMueTEpO1xyXG4gICAgICAgICAgY3R4LmxpbmVUbyhzaGFwZS5wcm9wZXJ0aWVzLngyLCBzaGFwZS5wcm9wZXJ0aWVzLnkyKTtcclxuICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgIGlmIChzaG93QW5ub3RhdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5zcXJ0KFxyXG4gICAgICAgICAgICAgIE1hdGgucG93KHNoYXBlLnByb3BlcnRpZXMueDIgLSBzaGFwZS5wcm9wZXJ0aWVzLngxLCAyKSArIFxyXG4gICAgICAgICAgICAgIE1hdGgucG93KHNoYXBlLnByb3BlcnRpZXMueTIgLSBzaGFwZS5wcm9wZXJ0aWVzLnkxLCAyKVxyXG4gICAgICAgICAgICApLnRvRml4ZWQoMSk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChgJHtsZW5ndGh9cHhgLCBcclxuICAgICAgICAgICAgICAoc2hhcGUucHJvcGVydGllcy54MSArIHNoYXBlLnByb3BlcnRpZXMueDIpIC8gMixcclxuICAgICAgICAgICAgICAoc2hhcGUucHJvcGVydGllcy55MSArIHNoYXBlLnByb3BlcnRpZXMueTIpIC8gMlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBcclxuICAgICAgICBjYXNlICdyZWN0YW5nbGUnOlxyXG4gICAgICAgICAgY3R4LnN0cm9rZVJlY3QoXHJcbiAgICAgICAgICAgIHNoYXBlLnByb3BlcnRpZXMueCwgXHJcbiAgICAgICAgICAgIHNoYXBlLnByb3BlcnRpZXMueSwgXHJcbiAgICAgICAgICAgIHNoYXBlLnByb3BlcnRpZXMud2lkdGgsIFxyXG4gICAgICAgICAgICBzaGFwZS5wcm9wZXJ0aWVzLmhlaWdodFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGlmIChzaG93QW5ub3RhdGlvbnMpIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBXOiAke3NoYXBlLnByb3BlcnRpZXMud2lkdGh9cHhgLCBcclxuICAgICAgICAgICAgICBzaGFwZS5wcm9wZXJ0aWVzLnggKyBzaGFwZS5wcm9wZXJ0aWVzLndpZHRoIC8gMiAtIDIwLFxyXG4gICAgICAgICAgICAgIHNoYXBlLnByb3BlcnRpZXMueSAtIDEwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChgSDogJHtzaGFwZS5wcm9wZXJ0aWVzLmhlaWdodH1weGAsIFxyXG4gICAgICAgICAgICAgIHNoYXBlLnByb3BlcnRpZXMueCAtIDQwLFxyXG4gICAgICAgICAgICAgIHNoYXBlLnByb3BlcnRpZXMueSArIHNoYXBlLnByb3BlcnRpZXMuaGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBcclxuICAgICAgICBjYXNlICdjaXJjbGUnOlxyXG4gICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgY3R4LmFyYyhcclxuICAgICAgICAgICAgc2hhcGUucHJvcGVydGllcy54LCBcclxuICAgICAgICAgICAgc2hhcGUucHJvcGVydGllcy55LCBcclxuICAgICAgICAgICAgc2hhcGUucHJvcGVydGllcy5yYWRpdXMsIFxyXG4gICAgICAgICAgICAwLCBcclxuICAgICAgICAgICAgTWF0aC5QSSAqIDJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICBpZiAoc2hvd0Fubm90YXRpb25zKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChgUjogJHtzaGFwZS5wcm9wZXJ0aWVzLnJhZGl1c31weGAsIFxyXG4gICAgICAgICAgICAgIHNoYXBlLnByb3BlcnRpZXMueCArIHNoYXBlLnByb3BlcnRpZXMucmFkaXVzICsgNSxcclxuICAgICAgICAgICAgICBzaGFwZS5wcm9wZXJ0aWVzLnlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LCBbc2hhcGVzLCBzZWxlY3RlZFNoYXBlLCBzaG93QW5ub3RhdGlvbnMsIGRpbWVuc2lvbnNdKTtcclxuXHJcbiAgLy8gRGVmaW5lIGV2ZW50IGhhbmRsZXJzXHJcbiAgY29uc3QgaGFuZGxlTW91c2VEb3duID0gKGUpID0+IHtcclxuICAgIGlmIChhY3RpdmVUb29sID09PSAnc2VsZWN0JykgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcclxuICAgIGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCB4ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0O1xyXG4gICAgY29uc3QgeSA9IGUuY2xpZW50WSAtIHJlY3QudG9wO1xyXG4gICAgXHJcbiAgICBzZXRJc0RyYXdpbmcodHJ1ZSk7XHJcbiAgICBzZXRTdGFydFBvaW50KHsgeCwgeSB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgbmV3U2hhcGUgPSB7XHJcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXHJcbiAgICAgIHR5cGU6IGFjdGl2ZVRvb2wsXHJcbiAgICAgIHByb3BlcnRpZXM6IHt9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBzd2l0Y2ggKGFjdGl2ZVRvb2wpIHtcclxuICAgICAgY2FzZSAnbGluZSc6XHJcbiAgICAgICAgbmV3U2hhcGUucHJvcGVydGllcyA9IHsgeDE6IHgsIHkxOiB5LCB4MjogeCwgeTI6IHkgfTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmVjdGFuZ2xlJzpcclxuICAgICAgICBuZXdTaGFwZS5wcm9wZXJ0aWVzID0geyB4LCB5LCB3aWR0aDogMCwgaGVpZ2h0OiAwIH07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2NpcmNsZSc6XHJcbiAgICAgICAgbmV3U2hhcGUucHJvcGVydGllcyA9IHsgeCwgeSwgcmFkaXVzOiAwIH07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFkZFNoYXBlKG5ld1NoYXBlKTtcclxuICAgIHNldFNlbGVjdGVkU2hhcGUobmV3U2hhcGUpO1xyXG4gIH07XHJcbiAgXHJcbiAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGUpID0+IHtcclxuICAgIGlmICghaXNEcmF3aW5nIHx8ICFzZWxlY3RlZFNoYXBlKSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IHggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7XHJcbiAgICBjb25zdCB5ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7XHJcbiAgICBcclxuICAgIGNvbnN0IHVwZGF0ZWRTaGFwZSA9IHsgLi4uc2VsZWN0ZWRTaGFwZSB9O1xyXG4gICAgXHJcbiAgICBzd2l0Y2ggKHNlbGVjdGVkU2hhcGUudHlwZSkge1xyXG4gICAgICBjYXNlICdsaW5lJzpcclxuICAgICAgICB1cGRhdGVkU2hhcGUucHJvcGVydGllcyA9IHsgXHJcbiAgICAgICAgICAuLi5zZWxlY3RlZFNoYXBlLnByb3BlcnRpZXMsIFxyXG4gICAgICAgICAgeDI6IHgsIFxyXG4gICAgICAgICAgeTI6IHkgXHJcbiAgICAgICAgfTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmVjdGFuZ2xlJzpcclxuICAgICAgICB1cGRhdGVkU2hhcGUucHJvcGVydGllcyA9IHsgXHJcbiAgICAgICAgICAuLi5zZWxlY3RlZFNoYXBlLnByb3BlcnRpZXMsIFxyXG4gICAgICAgICAgd2lkdGg6IHggLSBzZWxlY3RlZFNoYXBlLnByb3BlcnRpZXMueCxcclxuICAgICAgICAgIGhlaWdodDogeSAtIHNlbGVjdGVkU2hhcGUucHJvcGVydGllcy55XHJcbiAgICAgICAgfTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnY2lyY2xlJzpcclxuICAgICAgICBjb25zdCByYWRpdXMgPSBNYXRoLnNxcnQoXHJcbiAgICAgICAgICBNYXRoLnBvdyh4IC0gc2VsZWN0ZWRTaGFwZS5wcm9wZXJ0aWVzLngsIDIpICsgXHJcbiAgICAgICAgICBNYXRoLnBvdyh5IC0gc2VsZWN0ZWRTaGFwZS5wcm9wZXJ0aWVzLnksIDIpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB1cGRhdGVkU2hhcGUucHJvcGVydGllcyA9IHsgXHJcbiAgICAgICAgICAuLi5zZWxlY3RlZFNoYXBlLnByb3BlcnRpZXMsIFxyXG4gICAgICAgICAgcmFkaXVzIFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHVwZGF0ZVNoYXBlKHNlbGVjdGVkU2hhcGUuaWQsIHVwZGF0ZWRTaGFwZS5wcm9wZXJ0aWVzKTtcclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSAoKSA9PiB7XHJcbiAgICBzZXRJc0RyYXdpbmcoZmFsc2UpO1xyXG4gIH07XHJcbiAgXHJcbiAgY29uc3QgaGFuZGxlQ2FudmFzQ2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGFjdGl2ZVRvb2wgIT09ICdzZWxlY3QnKSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IHggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7XHJcbiAgICBjb25zdCB5ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7XHJcbiAgICBcclxuICAgIC8vIEZpbmQgY2xpY2tlZCBzaGFwZVxyXG4gICAgY29uc3QgY2xpY2tlZFNoYXBlID0gc2hhcGVzLmZpbmQoc2hhcGUgPT4ge1xyXG4gICAgICBzd2l0Y2ggKHNoYXBlLnR5cGUpIHtcclxuICAgICAgICBjYXNlICdsaW5lJzpcclxuICAgICAgICAgIC8vIExpbmUgY29sbGlzaW9uIGRldGVjdGlvblxyXG4gICAgICAgICAgY29uc3QgZHggPSBzaGFwZS5wcm9wZXJ0aWVzLngyIC0gc2hhcGUucHJvcGVydGllcy54MTtcclxuICAgICAgICAgIGNvbnN0IGR5ID0gc2hhcGUucHJvcGVydGllcy55MiAtIHNoYXBlLnByb3BlcnRpZXMueTE7XHJcbiAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xyXG4gICAgICAgICAgY29uc3QgZG90ID0gKCh4IC0gc2hhcGUucHJvcGVydGllcy54MSkgKiBkeCArICh5IC0gc2hhcGUucHJvcGVydGllcy55MSkgKiBkeSkgLyAobGVuZ3RoICogbGVuZ3RoKTtcclxuICAgICAgICAgIGNvbnN0IGNsb3Nlc3RYID0gc2hhcGUucHJvcGVydGllcy54MSArIGRvdCAqIGR4O1xyXG4gICAgICAgICAgY29uc3QgY2xvc2VzdFkgPSBzaGFwZS5wcm9wZXJ0aWVzLnkxICsgZG90ICogZHk7XHJcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyh4IC0gY2xvc2VzdFgsIDIpICsgTWF0aC5wb3coeSAtIGNsb3Nlc3RZLCAyKSk7XHJcbiAgICAgICAgICByZXR1cm4gZGlzdGFuY2UgPCA1O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgY2FzZSAncmVjdGFuZ2xlJzpcclxuICAgICAgICAgIHJldHVybiB4ID49IHNoYXBlLnByb3BlcnRpZXMueCAmJiBcclxuICAgICAgICAgICAgICAgICB4IDw9IHNoYXBlLnByb3BlcnRpZXMueCArIHNoYXBlLnByb3BlcnRpZXMud2lkdGggJiZcclxuICAgICAgICAgICAgICAgICB5ID49IHNoYXBlLnByb3BlcnRpZXMueSAmJiBcclxuICAgICAgICAgICAgICAgICB5IDw9IHNoYXBlLnByb3BlcnRpZXMueSArIHNoYXBlLnByb3BlcnRpZXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIGNhc2UgJ2NpcmNsZSc6XHJcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZUZyb21DZW50ZXIgPSBNYXRoLnNxcnQoXHJcbiAgICAgICAgICAgIE1hdGgucG93KHggLSBzaGFwZS5wcm9wZXJ0aWVzLngsIDIpICsgXHJcbiAgICAgICAgICAgIE1hdGgucG93KHkgLSBzaGFwZS5wcm9wZXJ0aWVzLnksIDIpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgcmV0dXJuIGRpc3RhbmNlRnJvbUNlbnRlciA8PSBzaGFwZS5wcm9wZXJ0aWVzLnJhZGl1cztcclxuICAgICAgICAgIFxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBzZXRTZWxlY3RlZFNoYXBlKGNsaWNrZWRTaGFwZSB8fCBudWxsKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgcmVsYXRpdmVcIj5cclxuICAgICAgPGNhbnZhc1xyXG4gICAgICAgIHJlZj17Y2FudmFzUmVmfVxyXG4gICAgICAgIHdpZHRoPXtkaW1lbnNpb25zLndpZHRofVxyXG4gICAgICAgIGhlaWdodD17ZGltZW5zaW9ucy5oZWlnaHR9XHJcbiAgICAgICAgb25Nb3VzZURvd249e2hhbmRsZU1vdXNlRG93bn1cclxuICAgICAgICBvbk1vdXNlTW92ZT17aGFuZGxlTW91c2VNb3ZlfVxyXG4gICAgICAgIG9uTW91c2VVcD17aGFuZGxlTW91c2VVcH1cclxuICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlVXB9XHJcbiAgICAgICAgb25DbGljaz17aGFuZGxlQ2FudmFzQ2xpY2t9XHJcbiAgICAgICAgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBiZy13aGl0ZVwiXHJcbiAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBhY3RpdmVUb29sID09PSAnc2VsZWN0JyA/ICdkZWZhdWx0JyA6ICdjcm9zc2hhaXInIH19XHJcbiAgICAgIC8+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRHJhd2luZ0NhbnZhczsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZURyYXdpbmdDb250ZXh0IiwiRHJhd2luZ0NhbnZhcyIsImFjdGl2ZVRvb2wiLCJzaGFwZXMiLCJhZGRTaGFwZSIsInNlbGVjdGVkU2hhcGUiLCJzZXRTZWxlY3RlZFNoYXBlIiwic2hvd0Fubm90YXRpb25zIiwidXBkYXRlU2hhcGUiLCJjYW52YXNSZWYiLCJpc0RyYXdpbmciLCJzZXRJc0RyYXdpbmciLCJzdGFydFBvaW50Iiwic2V0U3RhcnRQb2ludCIsIngiLCJ5IiwiZGltZW5zaW9ucyIsInNldERpbWVuc2lvbnMiLCJ3aWR0aCIsImhlaWdodCIsInVwZGF0ZURpbWVuc2lvbnMiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhbnZhcyIsImN1cnJlbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiY2xlYXJSZWN0IiwiZm9yRWFjaCIsInNoYXBlIiwic3Ryb2tlU3R5bGUiLCJpZCIsImxpbmVXaWR0aCIsImZvbnQiLCJmaWxsU3R5bGUiLCJ0eXBlIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwicHJvcGVydGllcyIsIngxIiwieTEiLCJsaW5lVG8iLCJ4MiIsInkyIiwic3Ryb2tlIiwibGVuZ3RoIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJ0b0ZpeGVkIiwiZmlsbFRleHQiLCJzdHJva2VSZWN0IiwiYXJjIiwicmFkaXVzIiwiUEkiLCJoYW5kbGVNb3VzZURvd24iLCJlIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNsaWVudFgiLCJsZWZ0IiwiY2xpZW50WSIsInRvcCIsIm5ld1NoYXBlIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiaGFuZGxlTW91c2VNb3ZlIiwidXBkYXRlZFNoYXBlIiwiaGFuZGxlTW91c2VVcCIsImhhbmRsZUNhbnZhc0NsaWNrIiwiY2xpY2tlZFNoYXBlIiwiZmluZCIsImR4IiwiZHkiLCJkb3QiLCJjbG9zZXN0WCIsImNsb3Nlc3RZIiwiZGlzdGFuY2UiLCJkaXN0YW5jZUZyb21DZW50ZXIiLCJkaXYiLCJjbGFzc05hbWUiLCJyZWYiLCJvbk1vdXNlRG93biIsIm9uTW91c2VNb3ZlIiwib25Nb3VzZVVwIiwib25Nb3VzZUxlYXZlIiwib25DbGljayIsInN0eWxlIiwiY3Vyc29yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/components/DrawingCanvas.jsx\n"));

/***/ })

}]);